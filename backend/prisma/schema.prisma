// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Agente {
  id        Int      @id @default(autoincrement())
  nome      String   @unique
  password  String   @unique
  createdAt DateTime @default(now())

  turnos    Turno[]
}

model Turno {
  id                  Int      @id @default(autoincrement())
  data                DateTime
  municipio            String
  ciclo                String
  localidade           String
  categoriaLocalidade  String?
  zona                 String?
  atividade             String?

  agenteId             Int
  agente               Agente   @relation(fields: [agenteId], references: [id])
  nomeAgente           String

  createdAt            DateTime @default(now())
  registros            Registro[]
}

model Registro {
  id                  Int      @id @default(autoincrement())

  turnoId             Int
  turno               Turno    @relation(fields: [turnoId], references: [id])

  quarteirao           String?
  sequencia            String?
  sequencia2           String?
  lado                 String?
  tipoImovel           String?

  logradouro           String?
  numero               String?
  complemento          String?

  horarioEntrada       DateTime?
  informacao           String?

  a1                   Int?
  a2                   Int?
  b                    Int?
  c                    Int?
  d1                   Int?
  d2                   Int?
  e                    Int?

  inspL1               Boolean?
  imTrat               Boolean?

  amostraInicial       Int?
  amostraFinal         Int?
  qtdDepTrat           Int?
  depositosEliminados  Int?
  qtdTubitos           Int?
  quedaGramas          Int?

  criadoEm             DateTime @default(now())
}
